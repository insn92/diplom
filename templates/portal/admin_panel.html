{% extends 'portal/base.html' %}
{% block content %}
<h2>Панель администратора</h2>
<table class="table table-bordered">
  <thead><tr><th>Пользователь</th><th>Курс</th><th>Дата</th><th>Оплата</th><th>Статус</th><th>Действия</th></tr></thead>
  <tbody>
    {% for app in applications %}
    <tr>
      <td>{{ app.user.username }}</td>
      <td>{{ app.course_name }}</td>
      <td>{{ app.start_date }}</td>
      <td>{{ app.get_payment_method_display }}</td>
      <td>{{ app.status }}</td>
      <td>
        <form method="post" action="{% url 'change_status' app.pk %}" style="display:inline;">
          {% csrf_token %}
          <select name="status" class="form-select form-select-sm" style="width:auto;display:inline-block;">
            {% for code,label in app.STATUS_CHOICES %}
              <option value="{{ code }}" {% if code == app.status %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
          <button class="btn btn-sm btn-primary">Сохранить</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
